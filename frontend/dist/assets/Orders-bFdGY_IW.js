import{r as a,j as e,H as O,S as f,a as w,h as A}from"./index-CyhK9dug.js";import{a as v}from"./api-BVW7PNTY.js";import{C as u}from"./check-circle-BGNztDYQ.js";import{F as D,S as H}from"./search-DUJmiN_O.js";import{U as z}from"./user-C2XcbpXO.js";import{D as E}from"./dollar-sign-CXdfyJUJ.js";import{X as M}from"./x-circle-Dq2IRGbs.js";function K(){const[l,b]=a.useState([]),[N,y]=a.useState(!0),[d,S]=a.useState("all"),[c,k]=a.useState(""),[s,C]=a.useState(null),[L,o]=a.useState(!1),[x,p]=a.useState({type:"",text:""});a.useEffect(()=>{g()},[]);const g=async()=>{try{const t=(await v.get("/orders")).data;b(Array.isArray(t)?t:[])}catch(r){m("error","Siparişler yüklenirken hata oluştu"),console.error("Error fetching orders:",r),b([])}finally{y(!1)}},m=(r,t)=>{p({type:r,text:t}),setTimeout(()=>p({type:"",text:""}),3e3)},_=async(r,t)=>{try{await v.patch(`/orders/${r}`,{status:t}),m("success",`Sipariş durumu güncellendi: ${h(t)}`),g(),o(!1)}catch(n){m("error","Durum güncellenirken hata oluştu"),console.error("Error updating order:",n)}},T=r=>{switch(String(r||"").toLowerCase()){case"delivered":return"from-green-500/20 to-green-600/20 border-green-500/30 text-green-400";case"ready":return"from-blue-500/20 to-blue-600/20 border-blue-500/30 text-blue-400";case"preparing":return"from-purple-500/20 to-purple-600/20 border-purple-500/30 text-purple-400";case"confirmed":return"from-cyan-500/20 to-cyan-600/20 border-cyan-500/30 text-cyan-400";case"pending":return"from-yellow-500/20 to-yellow-600/20 border-yellow-500/30 text-yellow-400";case"cancelled":return"from-red-500/20 to-red-600/20 border-red-500/30 text-red-400";default:return"from-gray-500/20 to-gray-600/20 border-gray-500/30 text-gray-400"}},h=r=>{switch(String(r||"").toLowerCase()){case"pending":return"Bekliyor";case"confirmed":return"Onaylandı";case"preparing":return"Hazırlanıyor";case"ready":return"Hazır";case"delivered":return"Teslim Edildi";case"cancelled":return"İptal";default:return r}},F=r=>{switch(String(r||"").toLowerCase()){case"delivered":return e.jsx(u,{className:"w-4 h-4"});case"cancelled":return e.jsx(M,{className:"w-4 h-4"});default:return e.jsx(w,{className:"w-4 h-4"})}},j=l.filter(r=>{const t=d==="all"||String(r.status||"").toLowerCase()===d,n=(r.customer_name||"").toLowerCase().includes(c.toLowerCase())||(r.customer_phone||"").includes(c);return t&&n}),i={total:l.length,pending:l.filter(r=>String(r.status||"").toLowerCase()==="pending").length,confirmed:l.filter(r=>String(r.status||"").toLowerCase()==="confirmed").length,preparing:l.filter(r=>String(r.status||"").toLowerCase()==="preparing").length,delivered:l.filter(r=>String(r.status||"").toLowerCase()==="delivered").length};return N?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500"})}):e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx("title",{children:"Siparişler - Admin Panel"})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-amber-500/20 via-orange-500/20 to-amber-500/20 border border-amber-500/30 backdrop-blur-xl p-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-amber-500 to-orange-600 flex items-center justify-center shadow-lg shadow-amber-500/50",children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Siparişler"}),e.jsx("p",{className:"text-white/60",children:"Müşteri siparişlerini yönetin"})]})]})})]}),x.text&&e.jsx("div",{className:`relative overflow-hidden rounded-2xl p-4 ${x.type==="success"?"bg-green-500/10 border border-green-500/30 text-green-400":"bg-red-500/10 border border-red-500/30 text-red-400"} backdrop-blur-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${x.type==="success"?"bg-green-400":"bg-red-400"}`}),x.text]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/30 backdrop-blur-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Toplam"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:i.total})]}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-500/20 flex items-center justify-center",children:e.jsx(f,{className:"w-7 h-7 text-blue-400"})})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-yellow-500/10 to-yellow-600/10 border border-yellow-500/30 backdrop-blur-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Bekliyor"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:i.pending})]}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-yellow-500/20 flex items-center justify-center",children:e.jsx(w,{className:"w-7 h-7 text-yellow-400"})})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-cyan-500/10 to-cyan-600/10 border border-cyan-500/30 backdrop-blur-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Onaylandı"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:i.confirmed})]}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-500/20 flex items-center justify-center",children:e.jsx(u,{className:"w-7 h-7 text-cyan-400"})})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-500/10 to-purple-600/10 border border-purple-500/30 backdrop-blur-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Hazırlanıyor"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:i.preparing})]}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-purple-500/20 flex items-center justify-center",children:e.jsx(A,{className:"w-7 h-7 text-purple-400"})})]})}),e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-green-500/10 to-green-600/10 border border-green-500/30 backdrop-blur-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Teslim"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:i.delivered})]}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-green-500/20 flex items-center justify-center",children:e.jsx(u,{className:"w-7 h-7 text-green-400"})})]})})]}),e.jsxs("div",{className:"relative overflow-hidden rounded-2xl backdrop-blur-xl bg-white/5 border border-white/10 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(D,{className:"w-5 h-5 text-amber-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Filtrele"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/40 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Müşteri ara (isim, telefon)...",value:c,onChange:r=>k(r.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/40 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20 transition-all outline-none"})]}),e.jsxs("select",{value:d,onChange:r=>S(r.target.value),className:"px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20 transition-all outline-none",children:[e.jsx("option",{value:"all",className:"bg-gray-900",children:"Tüm Durumlar"}),e.jsx("option",{value:"pending",className:"bg-gray-900",children:"Bekliyor"}),e.jsx("option",{value:"confirmed",className:"bg-gray-900",children:"Onaylandı"}),e.jsx("option",{value:"preparing",className:"bg-gray-900",children:"Hazırlanıyor"}),e.jsx("option",{value:"ready",className:"bg-gray-900",children:"Hazır"}),e.jsx("option",{value:"delivered",className:"bg-gray-900",children:"Teslim Edildi"}),e.jsx("option",{value:"cancelled",className:"bg-gray-900",children:"İptal"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[j.map(r=>e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl backdrop-blur-xl bg-gradient-to-br from-white/10 via-white/5 to-transparent border border-white/20 hover:border-amber-500/50 transition-all duration-300 p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/0 via-orange-500/0 to-amber-500/0 group-hover:from-amber-500/10 group-hover:via-orange-500/10 group-hover:to-amber-500/10 transition-all duration-500"}),e.jsxs("div",{className:"relative grid grid-cols-1 lg:grid-cols-12 gap-4 items-center",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-600/20 flex items-center justify-center",children:e.jsx(z,{className:"w-6 h-6 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:r.customer_name}),e.jsx("p",{className:"text-sm text-white/60",children:r.customer_phone})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"space-y-1",children:Array.isArray(r.items)&&r.items.length>0?e.jsxs(e.Fragment,{children:[r.items.slice(0,2).map((t,n)=>e.jsxs("div",{className:"text-sm text-white/80",children:[t.product_name||"Ürün"," x",t.quantity||1]},n)),r.items.length>2&&e.jsxs("div",{className:"text-xs text-white/50",children:["+",r.items.length-2," ürün daha"]})]}):e.jsx("div",{className:"text-sm text-white/60",children:"Ürün bilgisi yok"})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-green-400"}),e.jsxs("span",{className:"text-xl font-bold text-green-400",children:["₺",Number(r.total_amount||0).toFixed(2)]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium border bg-gradient-to-br ${T(r.status)}`,children:[F(r.status),h(r.status)]})}),e.jsx("div",{className:"lg:col-span-2 flex gap-2",children:e.jsx("button",{onClick:()=>{C(r),o(!0)},className:"flex-1 px-4 py-2 rounded-xl bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20 transition-all",children:"Detay"})})]})]},r.id)),j.length===0&&e.jsx("div",{className:"text-center py-12 text-white/60",children:c||d!=="all"?"Filtre kriterlerine uygun sipariş bulunamadı.":"Henüz sipariş yok."})]}),L&&s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>o(!1),children:e.jsxs("div",{className:"relative max-w-2xl w-full rounded-2xl backdrop-blur-xl bg-gradient-to-br from-white/10 to-white/5 border border-white/20 p-6",onClick:r=>r.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Sipariş Detayı"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/60",children:"Müşteri"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/60",children:"Telefon"}),e.jsx("p",{className:"text-lg text-white",children:s.customer_phone})]}),s.customer_address&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/60",children:"Adres"}),e.jsx("p",{className:"text-lg text-white",children:s.customer_address})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/60 mb-2",children:"Ürünler"}),e.jsx("div",{className:"space-y-2",children:Array.isArray(s.items)&&s.items.length>0?s.items.map((r,t)=>e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-white/5",children:[e.jsxs("span",{className:"text-white",children:[r.product_name||"Ürün"," x",r.quantity||1]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["₺",((r.price||0)*(r.quantity||1)).toFixed(2)]})]},t)):e.jsx("div",{className:"text-white/60 p-3",children:"Ürün bilgisi yok"})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-white/10",children:[e.jsx("span",{className:"text-lg font-semibold text-white",children:"Toplam"}),e.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["₺",Number(s.total_amount||0).toFixed(2)]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["pending","confirmed","preparing","ready","delivered","cancelled"].map(r=>e.jsx("button",{onClick:()=>_(s.id,r),className:`px-4 py-2 rounded-xl font-medium transition-all ${String(s.status||"").toLowerCase()===r?"bg-gradient-to-r from-amber-500 to-orange-600 text-white":"bg-white/5 text-white/70 hover:bg-white/10"}`,children:h(r)},r))}),e.jsx("button",{onClick:()=>o(!1),className:"mt-6 w-full px-4 py-3 rounded-xl bg-white/5 text-white hover:bg-white/10 transition-all",children:"Kapat"})]})})]})]})}export{K as default};
